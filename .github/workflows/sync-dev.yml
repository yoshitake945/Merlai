name: Sync dev branch with main

on:
  push:
    branches: [ main ]

jobs:
  sync-dev:
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
          token: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Configure Git
        run: |
          git config --global user.name 'github-actions[bot]'
          git config --global user.email 'github-actions[bot]@users.noreply.github.com'
      
      - name: Sync dev branch with main
        run: |
          # devãƒ–ãƒ©ãƒ³ãƒã‚’mainã«åŒæœŸ
          git checkout dev || git checkout -b dev
          git reset --hard main
          git push origin dev --force
          
          echo "âœ… dev branch synchronized with main"
      
      - name: Create sync notification
        run: |
          echo "ğŸ”„ Dev branch has been automatically synchronized with main"
          echo "ğŸ“… Sync time: $(date)"
          echo "ğŸ”— Main commit: $(git rev-parse --short HEAD)" 